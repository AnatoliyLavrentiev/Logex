<div class="modal-header text-primary">
    <h2 class="modal-title w-100 text-center fs-2">ğŸ“‹ DÃ©tails de la commande</h2>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fermer"></button>
</div>

<div class="modal-body text-center">
    <div class="card shadow-sm">
        <div class="card-body fs-5">
        {% set statusLabels = {
    'new': 'ğŸ†• Nouveau',
    'executed': 'âœ… ExÃ©cutÃ©',
    'shipped': 'ğŸšš ExpÃ©diÃ©',
    'cancelled': 'âŒ AnnulÃ©'
} %}

{% set montant = 0 %}
{% for item in order.orderItems %}
    {% set product = item.inventory.product %}
    {% set montant = montant + (product.price * item.quantity) %}
{% endfor %}

            <p><strong>ğŸ§¾ NumÃ©ro de commande :</strong> {{ order.orderNumber }}</p>
            <p><strong>ğŸ“… CrÃ©Ã©e le :</strong> {{ order.createdAt|date('d/m/Y H:i') }}</p>
<p><strong>ğŸ“Œ Statut :</strong> {{ statusLabels[order.status] ?? order.status }}</p>
            <p><strong>ğŸ’° Montant :</strong> {{ montant|number_format(2, ',', ' ') }} â‚¬</p>
            <p><strong>ğŸ’¶ Montant TTC (20% TVA) :</strong> {{ (montant * 1.2)|number_format(2, ',', ' ') }} â‚¬</p>
            <p><strong>âœ… Date d'exÃ©cution  :</strong>
                {% if order.delivery and order.delivery.getShippedAt() %}
                    {{ order.delivery.getShippedAt()|date('d/m/Y H:i') }}
                {% else %}
                    â€”
                {% endif %}
            </p>
            {% if order.delivery and order.delivery.deliveredAt %}
    <p><strong>ğŸ“¦ Date de livraison :</strong> {{ order.delivery.deliveredAt|date('d/m/Y H:i') }}</p>
{% endif %}

            {# DÃ©tails produits #}
            <hr>
            <h5 class="text-primary fw-bold mb-3">ğŸ›’ Produits commandÃ©s</h5>
<ul class="list-group text-start">
    {% for item in order.orderItems %}
        {% set product = item.inventory.product %}
        <li class="list-group-item">
            <strong>{{ product.prodname }}</strong><br>
            ğŸ”¢ RÃ©fÃ©rence : {{ product.reference }}<br>
            ğŸ“¦ QuantitÃ© : {{ item.quantity }}<br>
            ğŸ’¶ Prix unitaire : {{ product.price|number_format(2, ',', ' ') }} â‚¬<br>
            âš–ï¸ Poids unitaire : {{ product.weight|number_format(2, ',', ' ') }} kg<br>
            ğŸ’° Prix total : {{ (product.price * item.quantity)|number_format(2, ',', ' ') }} â‚¬<br>
            âš–ï¸ Poids total : {{ (product.weight * item.quantity)|number_format(2, ',', ' ') }} kg
        </li>
    {% endfor %}
</ul>
        </div>
    </div>

    <button type="button" class="btn btn-secondary mt-4 w-100 fs-5 d-print-none" data-bs-dismiss="modal">âŒ Fermer</button>
</div>
